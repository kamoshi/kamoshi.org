---
import List from '../../layouts/List.astro';
import { getCollection } from 'astro:content';
import dayjs from 'dayjs';


export async function getStaticPaths () {
  return [...new Set((await getCollection('aoc')).map(e => e.slug.slice(0, 4)))]
    .map(year => ({params: {year}, props: {year}}))
}

const { year } = Astro.props;
const content = await getCollection('aoc', (entry) => entry.id.startsWith(year));

const pages = content
  .map(doc => ({
    title: `Day ${doc.data.day}`,
    slug: `/aoc/${doc.slug}/`,
    date: dayjs(doc.data.date),
  }));

---

<List title={year} pages={pages} />
